{"version":3,"sources":["assets/logo.svg","pages/Home/index.tsx","services/api.ts","components/Dropzone/index.tsx","pages/CreatePoint/index.tsx","routes.tsx","App.tsx","index.tsx"],"names":["module","exports","Home","id","className","src","logo","alt","to","api","axios","create","baseURL","Dropzone","onFileUploaded","useState","selectedFileUrl","setselectedFileUrl","onDrop","useCallback","accpetedFiles","file","fileUrl","URL","createObjectURL","useDropzone","accept","getRootProps","getInputProps","CreatePoint","items","setItems","ufs","setUfs","cities","setCities","initialPosition","setInitialPosition","name","email","whatsapp","formData","setFormData","selectedUf","setSelectedUf","selectedCity","setSelectedCity","selectedItems","setSelectedItems","selectedPosition","setSelectedPosition","selectedFile","setSelectedFile","history","useHistory","handleInputChange","event","target","value","a","preventDefault","uf","city","latitude","longitude","data","FormData","append","String","join","post","alert","push","useEffect","navigator","geolocation","getCurrentPosition","position","coords","get","then","response","ufInitials","map","sigla","cityNames","nome","onSubmit","htmlFor","type","onChange","Map","center","zoom","onCLick","latlng","lat","lng","TileLayer","attribution","url","Marker","key","item","onClick","findIndex","filteredItems","filter","handleSelectItem","includes","image_url","title","Routes","component","path","exact","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8ae7f2ea.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.47c4581a.svg\";","import React from 'react'\nimport { FiLogIn } from 'react-icons/fi'\nimport { Link } from 'react-router-dom'\n\nimport logo from '../../assets/logo.svg'\nimport './styles.css'\n\nconst Home = ()=> {\n  return (\n    <div id=\"page-home\">\n      <div className=\"content\">\n        <header>\n          <img src={logo} alt=\"Ecoleta\"/>\n        </header>\n        <main>\n          <h1>Seu marketplace de coleta de resíduos.</h1>\n          <p>Ajudamos pessoas a encontratem pontos de coleta de forma eficiente.</p>\n\n          <Link to=\"/create-point\">\n            <span>\n             <FiLogIn />\n            </span>\n            <strong>Cadastre um ponto de coleta</strong>\n          </Link>\n        </main>\n      </div>\n    </div>\n  )\n}\n\nexport default Home\n","import axios from 'axios'\n\nconst api = axios.create({\n  baseURL: 'http://localhost:3333'\n})\n\nexport default api\n","import React, { useCallback, useState } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport { FiUpload } from 'react-icons/fi'\n\nimport './styles.css'\n\ninterface Props {\n  onFileUploaded: (file: File) => void\n}\n\nconst Dropzone: React.FC<Props> = ({ onFileUploaded }) => {\n  \n  const [selectedFileUrl, setselectedFileUrl] = useState('')\n\n  const onDrop = useCallback(accpetedFiles => {\n    const file = accpetedFiles[0]\n\n    const fileUrl = URL.createObjectURL(file)\n\n    setselectedFileUrl(fileUrl)\n    onFileUploaded(file)\n  }, [onFileUploaded])\n\n  const { getRootProps, getInputProps } = useDropzone({\n    onDrop,\n    accept: 'image/*'\n  })\n\n  return (\n    <div className=\"dropzone\" { ...getRootProps() }>\n      <input { ...getInputProps() } accept=\"image/*\" />\n\n      { selectedFileUrl\n        ? <img src={selectedFileUrl} alt=\"Point thumbnail\"/>\n        : (\n          <p>\n            <FiUpload />\n            Imagem do estabelecimento\n          </p>\n        )\n      }      \n    </div>\n  )\n}\n\nexport default Dropzone","import React, { useEffect, useState, ChangeEvent, FormEvent } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport { FiArrowLeft } from 'react-icons/fi'\nimport { Map, TileLayer, Marker } from 'react-leaflet'\nimport axios from 'axios'\nimport { LeafletMouseEvent } from 'leaflet'\nimport api from '../../services/api'\n\nimport Dropzone from '../../components/Dropzone'\n\nimport './styles.css'\nimport logo from '../../assets/logo.svg'\n\n// array ou bojeto: manualmente informar o tipo da variavel\n\ninterface Item {\n  id: number;\n  title: string;\n  image_url: string\n}\n\ninterface IBGEUFResponse {\n  sigla: string;\n}\n\ninterface IBGECityResponse {\n  nome: string;\n}\n\nconst CreatePoint = () => {\n  const [items, setItems] = useState<Item[]>([])\n  const [ufs, setUfs] = useState<string[]>([])\n  const [cities, setCities] = useState<string[]>([])\n  const [initialPosition, setInitialPosition] = useState<[number, number]>([0, 0])\n\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    whatsapp: ''\n  })\n\n  const [selectedUf, setSelectedUf] = useState('0')\n  const [selectedCity, setSelectedCity] = useState('0')\n  const [selectedItems, setSelectedItems] = useState<number[]>([])\n  const [selectedPosition, setSelectedPosition] = useState<[number, number]>([0, 0])\n  const [selectedFile, setSelectedFile] = useState<File>()\n\n  const history = useHistory()\n    \n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(position => {\n      const { latitude, longitude } = position.coords\n\n      setInitialPosition([latitude, longitude])\n    })\n  }, [])\n\n  useEffect(() => {\n    api.get('items').then(response => {\n      setItems(response.data)\n    })\n  }, [])\n\n  useEffect(() => {\n    axios.get<IBGEUFResponse[]>('https://servicodados.ibge.gov.br/api/v1/localidades/estados').then( response => {\n      const ufInitials = response.data.map(uf => uf.sigla)\n\n      setUfs(ufInitials)\n    })\n  }, [])\n\n  useEffect (() => {\n    //carregar as cidades sempre que a UF mudar\n    if (selectedUf === '0') {\n      return\n    }\n\n    axios\n      .get<IBGECityResponse[]>(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${selectedUf}/municipios`)\n      .then(response => {\n        const cityNames = response.data.map(city => city.nome)\n\n        setCities(cityNames)\n      })\n  }, [selectedUf])\n\n  function handleSelectUf(event: ChangeEvent<HTMLSelectElement>) {\n    const uf = event.target.value\n\n    setSelectedUf(uf)\n  }\n\n  function handleSelectCity(event: ChangeEvent<HTMLSelectElement>) {\n    const city = event.target.value\n\n    setSelectedCity(city)\n  }\n\n  function handleMapClick(event: LeafletMouseEvent) {\n    setSelectedPosition([\n      event.latlng.lat,\n      event.latlng.lng\n    ])\n  }\n\n  function handleInputChange(event: ChangeEvent<HTMLInputElement>) {    \n    const { name, value } = event.target\n\n    setFormData({ ...formData, [name]: value })\n  }\n\n  function handleSelectItem(id: number) {\n    const alreadySelected = selectedItems.findIndex(item => item === id)\n\n    if(alreadySelected >=0) {\n      const filteredItems = selectedItems.filter(item => item !== id)\n\n      setSelectedItems(filteredItems)\n    } else {\n      setSelectedItems([ ...selectedItems, id ])\n    }    \n  }\n\n  async function handleSubmit(event: FormEvent) {\n    event.preventDefault()\n    \n    const { name, email, whatsapp } = formData\n    const uf = selectedUf\n    const city = selectedCity\n    const [latitude, longitude] = selectedPosition\n    const items = selectedItems\n\n    const data = new FormData()\n    \n    data.append('name', name);\n    data.append('email', email);\n    data.append('whatsapp', whatsapp);\n    data.append('uf', uf);\n    data.append('city', city);\n    data.append('latitude', String(latitude));\n    data.append('longitude', String(longitude));\n    data.append('items', items.join(','));\n    \n    if ( selectedFile ) {\n      data.append('image', selectedFile)\n    }\n\n    await api.post('points', data)\n    \n    alert('Ponto de coleta criado')\n\n    history.push('/')    \n  }\n\n  return (\n    <div id=\"page-create-point\">\n      <header>\n        <img src={logo} alt=\"Ecoleta\"/>\n        <Link to=\"/\">\n          <FiArrowLeft />\n          Voltar para home\n        </Link>\n      </header>\n      <form onSubmit={handleSubmit}>\n        <h1>Cadastro do <br/> ponto de coleta</h1>\n\n        <Dropzone onFileUploaded={setSelectedFile} />\n\n        <fieldset>\n          <legend>\n            <h2>Dados</h2>\n          </legend>\n          <div className=\"field\">\n            <label htmlFor=\"name\">Nome da entidade</label>\n            <input \n              type=\"text\"\n              name=\"name\"\n              id=\"name\"\n              onChange={handleInputChange}\n            />\n          </div>\n\n          <div className=\"field-group\">\n            <div className=\"field\">\n              <label htmlFor=\"email\">E-mail</label>\n              <input \n                type=\"email\"\n                name=\"email\"\n                id=\"email\"\n                onChange={handleInputChange}\n              />\n            </div>\n\n            <div className=\"field\">\n              <label htmlFor=\"whatsapp\">Whatsapp</label>\n              <input \n                type=\"text\"\n                name=\"whatsapp\"\n                id=\"whatsapp\"\n                onChange={handleInputChange}\n              />\n            </div>\n          </div>\n        </fieldset>\n\n        <fieldset>\n          <legend>\n            <h2>Endereço</h2>\n            <span>Selecione o endereço no mapa</span>\n          </legend>\n\n          <Map center={initialPosition} zoom={15} onCLick={handleMapClick}>\n            <TileLayer\n              attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            />\n            <Marker position={selectedPosition} />\n          </Map>\n\n          <div className=\"field-group\">\n            <div className=\"field\">\n              <label htmlFor=\"uf\">Estado (UF)</label>\n              <select \n                name=\"uf\" \n                id=\"uf\" \n                value={selectedUf}\n                onChange={handleSelectUf}\n              >\n                <option value=\"0\">Selecione uma UF</option>\n                {ufs.map(uf => (\n                  <option key={uf} value={uf}>{uf}</option>\n                ))}\n              </select>\n            </div>\n            <div className=\"field\">\n              <label htmlFor=\"city\">Cidade</label>\n              <select \n                name=\"city\" \n                id=\"city\" \n                value={selectedCity} \n                onChange={handleSelectCity}\n              >\n                <option value=\"0\">Selecione uma Cidade</option>\n                {cities.map(city => (\n                  <option key={city} value={city}>{city}</option>\n                ))}\n              </select>\n            </div>          \n          </div>        \n        </fieldset>\n\n        <fieldset>\n          <legend>\n            <h2>Ítens de coleta</h2>\n            <span>Selecione um ou mais itens abaixo</span>\n          </legend>\n\n          <ul className=\"items-grid\">\n            {items.map(item =>(\n              <li \n                key={item.id} \n                onClick={() => handleSelectItem(item.id)}\n                className={selectedItems.includes(item.id) ? 'selected' : ''}\n              >\n                <img src={item.image_url} alt={item.title}/>\n                <span>{item.title}</span>\n              </li>\n            ))}\n            \n          </ul>          \n        </fieldset>\n        <button type=\"submit\">\n          Cadastrar ponto de coleta\n        </button>\n      </form>\n\n    </div>\n  )\n}\n\nexport default CreatePoint","import React from 'react'\nimport { Route, BrowserRouter} from 'react-router-dom'\n\nimport Home from './pages/Home'\nimport CreatePoint from './pages/CreatePoint'\n\nconst Routes = () => {\n  return (\n    <BrowserRouter>\n      <Route component={Home} path=\"/\" exact />\n      <Route component={CreatePoint} path=\"/create-point\" />\n    </BrowserRouter>\n  )\n}\n\nexport default Routes\n","import React from 'react'\nimport './App.css'\n\nimport Routes from './routes'\n\nfunction App() {\n  \n  return (    \n    <Routes />    \n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}